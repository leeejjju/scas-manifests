apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  # 이 앱의 이름은 scas-frontend 입니다.
  name: scas-frontend
  namespace: argocd
  # ⭐️ 드디어 사라지지 않을 어노테이션입니다! ⭐️
  annotations:
    argocd-image-updater.argoproj.io/write-back-method: git
spec:
  project: default
  source:
    # 이 앱도 자기 자신이 있는 리포지토리를 바라봅니다.
    repoURL: 'https://github.com/leeejjju/scas-manifests.git' # 👈 본인 리포 주소로 수정
    targetRevision: main
    # ⭐️ 그리고 apps/frontend 폴더의 Deployment/Service를 감시합니다! ⭐️
    path: apps/frontend
  destination:
    server: 'https://kubernetes.default.svc'
    namespace: default
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
