apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  # 애플리케이션의 이름입니다.
  name: scas-frontend
  # ArgoCD가 설치된 네임스페이스입니다.
  namespace: argocd
  # ⭐️ Image Updater를 동작시키는 핵심 스위치입니다. ⭐️
  annotations:
    argocd-image-updater.argoproj.io/write-back-method: git
spec:
  project: default
  source:
    # 매니페스트 Git 리포지토리 주소입니다.
    repoURL: 'https://github.com/leeejjju/scas-manifests.git'
    targetRevision: main # 👈 main 또는 master 등 브랜치 이름으로 수정
    path: apps/frontend
  destination:
    server: 'https://kubernetes.default.svc'
    namespace: default
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
